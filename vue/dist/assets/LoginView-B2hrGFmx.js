import{A as L}from"./auth-Bu2eIwL5.js";import{d as b,r as V,u as C,a as p,c as B,b as s,e as y,f as F,w as N,g,v as w,t as S,h as u,i as c,j as k,k as i,F as A,l as M,o as f,_ as q}from"./index-ayPKH_lX.js";import{T as D}from"./toast-CC-zwfnk.js";const U={class:"login-form"},$={class:"form-group"},j={class:"form-group"},E=["disabled"],I={class:"form-footer"},R={class:"redirect-text"},z=b({__name:"LoginForm",setup(x){const t=V({username:"",password:""}),r=C(),d=M(),n=p(!1),l=p(""),_=p("error"),a=(o,e="error")=>{l.value=o,_.value=e},v=()=>{l.value=""},h=async()=>{if(v(),!t.username.trim()){a("请输入用户名");return}if(!t.password){a("请输入密码");return}n.value=!0;try{const o=await r.login(t);o.success?(a("登录成功","success"),setTimeout(()=>{d.push("/chat")},2e3)):a(o.error||"登录失败")}catch(o){a("登录过程中发生错误"),console.error("Login error:",o)}finally{n.value=!1}};return(o,e)=>{const T=k("router-link");return f(),B(A,null,[s("div",U,[e[6]||(e[6]=s("h2",{class:"form-title"},"用户登录",-1)),s("form",{onSubmit:N(h,["prevent"])},[s("div",$,[e[2]||(e[2]=s("label",{for:"username",class:"form-label"},"用户名",-1)),g(s("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=m=>t.username=m),type:"text",class:"form-input",placeholder:"请输入用户名",required:""},null,512),[[w,t.username]])]),s("div",j,[e[3]||(e[3]=s("label",{for:"password",class:"form-label"},"密码",-1)),g(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=m=>t.password=m),type:"password",class:"form-input",placeholder:"请输入密码",required:""},null,512),[[w,t.password]])]),s("button",{type:"submit",class:"submit-button",disabled:n.value},S(n.value?"登录中...":"登录"),9,E)],32),s("div",I,[s("p",R,[e[5]||(e[5]=u(" 还没有账号？ ",-1)),c(T,{to:"/register",class:"redirect-link"},{default:i(()=>e[4]||(e[4]=[u("立即注册",-1)])),_:1,__:[4]})])])]),l.value?(f(),y(D,{key:0,message:l.value,type:_.value,onClose:v},null,8,["message","type"])):F("",!0)],64)}}}),G=q(z,[["__scopeId","data-v-1aa3e326"]]),H={class:"auth-redirect"},P=b({__name:"LoginView",setup(x){return(t,r)=>{const d=k("router-link");return f(),y(L,null,{footer:i(()=>[s("p",H,[r[1]||(r[1]=u(" 还没有账号？",-1)),c(d,{to:"/register",class:"auth-link"},{default:i(()=>r[0]||(r[0]=[u("立即注册",-1)])),_:1,__:[0]})])]),default:i(()=>[c(G)]),_:1})}}});export{P as default};
