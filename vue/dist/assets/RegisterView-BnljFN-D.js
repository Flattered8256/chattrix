import{A as h}from"./auth-C6RN2RFy.js";import{d as b,r as C,u as B,a as m,c as F,b as e,e as y,f as N,w as S,g as c,v as f,t as q,h as d,i as _,j as k,k as u,F as A,l as M,o as w,_ as x}from"./index-B0pHM0FM.js";import{T as U}from"./toast-CPZbFfg8.js";const D={class:"register-form"},I={class:"form-group"},L={class:"form-group"},$={class:"form-group"},j=["disabled"],E={class:"form-footer"},z={class:"redirect-text"},G=b({__name:"RegisterForm",setup(V){const o=C({username:"",password:"",password_confirm:""}),a=B(),p=M(),n=m(!1),i=m(""),v=m("success"),t=(r,s="error")=>{i.value=r,v.value=s},g=()=>{i.value=""},T=async()=>{if(g(),!o.username.trim()){t("请输入用户名");return}if(!o.password){t("请输入密码");return}if(o.password!==o.password_confirm){t("两次输入的密码不一致");return}if(o.password.length<6){t("密码长度至少为6位");return}n.value=!0;try{const r=await a.register(o);r.success?(t("注册成功，请登录","success"),setTimeout(()=>{p.push("/login")},2e3)):t(r.error||"注册失败")}catch(r){t("注册过程中发生错误"),console.error("Register error:",r)}finally{n.value=!1}};return(r,s)=>{const R=k("router-link");return w(),F(A,null,[e("div",D,[s[8]||(s[8]=e("h2",{class:"form-title"},"用户注册",-1)),e("form",{onSubmit:S(T,["prevent"])},[e("div",I,[s[3]||(s[3]=e("label",{for:"username",class:"form-label"},"用户名",-1)),c(e("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=l=>o.username=l),type:"text",class:"form-input",placeholder:"请输入用户名",required:""},null,512),[[f,o.username]])]),e("div",L,[s[4]||(s[4]=e("label",{for:"password",class:"form-label"},"密码",-1)),c(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=l=>o.password=l),type:"password",class:"form-input",placeholder:"请输入密码",required:""},null,512),[[f,o.password]])]),e("div",$,[s[5]||(s[5]=e("label",{for:"password_confirm",class:"form-label"},"确认密码",-1)),c(e("input",{id:"password_confirm","onUpdate:modelValue":s[2]||(s[2]=l=>o.password_confirm=l),type:"password",class:"form-input",placeholder:"请再次输入密码",required:""},null,512),[[f,o.password_confirm]])]),e("button",{type:"submit",class:"submit-button",disabled:n.value},q(n.value?"注册中...":"注册"),9,j)],32),e("div",E,[e("p",z,[s[7]||(s[7]=d(" 已有账号？ ",-1)),_(R,{to:"/login",class:"redirect-link"},{default:u(()=>s[6]||(s[6]=[d("立即登录",-1)])),_:1,__:[6]})])])]),i.value?(w(),y(U,{key:0,message:i.value,type:v.value,onClose:g},null,8,["message","type"])):N("",!0)],64)}}}),H=x(G,[["__scopeId","data-v-ccda6932"]]),J={class:"auth-redirect"},K=b({__name:"RegisterView",setup(V){return(o,a)=>{const p=k("router-link");return w(),y(h,null,{footer:u(()=>[e("p",J,[a[1]||(a[1]=d(" 已有账号？",-1)),_(p,{to:"/login",class:"auth-link"},{default:u(()=>a[0]||(a[0]=[d("立即登录",-1)])),_:1,__:[0]})])]),default:u(()=>[_(H)]),_:1})}}}),W=x(K,[["__scopeId","data-v-b18e7a71"]]);export{W as default};
